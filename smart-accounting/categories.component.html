<div class="categories-container">
  <!-- Header -->
  <header class="navbar">
    <div class="navbar-content">
      <div class="logo-section">
        <div class="logo-icon">ðŸ“‚</div>
        <span class="logo-text">Categories</span>
      </div>
      <a href="/home" class="nav-link">Back to Home</a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <div class="title-group">
        <h1>Categories Management</h1>
        <p class="muted">Manage categories with id, name, and image fields</p>
      </div>

      <div class="controls">
        <input class="search" type="search" placeholder="Search by id or name..." (input)="filter = $any($event.target).value" />
        <button class="btn btn-primary" (click)="openForm()">+ New Category</button>
      </div>
    </div>

    <!-- CRUD Form Modal -->
    <div class="modal-overlay" *ngIf="showForm">
      <div class="modal-content">
        <div class="modal-header">
          <h2>{{ editingId ? 'Edit Category' : 'Add New Category' }}</h2>
          <button class="close-btn" (click)="closeForm()">âœ•</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Category Name</label>
            <input type="text" [(ngModel)]="formData.name" placeholder="e.g., Sales" />
          </div>
          <div class="form-group">
            <label>Image URL</label>
            <input type="text" [(ngModel)]="formData.image" placeholder="https://..." />
          </div>
          <div *ngIf="formData.image" class="image-preview">
            <img [src]="formData.image" alt="preview" />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" (click)="closeForm()">Cancel</button>
          <button class="btn btn-primary" (click)="saveCategory()">{{ editingId ? 'Update' : 'Create' }}</button>
        </div>
      </div>
    </div>

    <!-- Categories Grid -->
    <div class="categories-grid">
      <article class="category-card" *ngFor="let c of filteredCategories()">
        <figure class="card-media">
          <img [src]="c.image" [alt]="c.name" />
        </figure>
        <div class="card-body">
          <h3 class="cat-name">{{ c.name }}</h3>
          <div class="cat-meta">ID: <span class="id">{{ c.id }}</span></div>
          <div class="card-actions">
            <button class="action edit" (click)="openForm(c)">Edit</button>
            <button class="action delete" (click)="deleteCategory(c.id)">Delete</button>
          </div>
        </div>
      </article>
    </div>
  </main>
</div>
