<div class="admin-container">
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-section">
        <i class="fas fa-cogs logo-icon"></i>
        <h1>Admin Panel</h1>
      </div>
    </div>

    <nav class="nav-menu">
      <a href="#" class="nav-link active" (click)="setActiveSection('dashboard')">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('users')">
        <i class="fas fa-users"></i>
        <span>Users</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('transactions')">
        <i class="fas fa-exchange-alt"></i>
        <span>Transactions</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('categories')">
        <i class="fas fa-tags"></i>
        <span>Categories</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('budgets')">
        <i class="fas fa-wallet"></i>
        <span>Budgets</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('reports')">
        <i class="fas fa-chart-bar"></i>
        <span>Reports</span>
      </a>
      <a href="#" class="nav-link" (click)="setActiveSection('settings')">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <i class="fas fa-user-shield user-avatar"></i>
        <span class="username">{{ currentAdmin }}</span>
      </div>
      <button class="logout-btn" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Dashboard Section -->
    <div class="dashboard-section" *ngIf="activeSection === 'dashboard'">
      <div class="welcome-banner">
        <h2>Welcome back, {{ currentAdmin }}!</h2>
        <p>System overview and management dashboard</p>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card users">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-content">
            <h3>Total Users</h3>
            <p class="stat-value">{{ totalUsers }}</p>
            <span class="stat-change positive">+5.2%</span>
          </div>
        </div>

        <div class="stat-card transactions">
          <div class="stat-icon">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <div class="stat-content">
            <h3>Total Transactions</h3>
            <p class="stat-value">{{ totalTransactions }}</p>
            <span class="stat-change positive">+12.8%</span>
          </div>
        </div>

        <div class="stat-card categories">
          <div class="stat-icon">
            <i class="fas fa-tags"></i>
          </div>
          <div class="stat-content">
            <h3>Categories</h3>
            <p class="stat-value">{{ totalCategories }}</p>
            <span class="stat-change neutral">Active</span>
          </div>
        </div>

        <div class="stat-card budgets">
          <div class="stat-icon">
            <i class="fas fa-wallet"></i>
          </div>
          <div class="stat-content">
            <h3>Active Budgets</h3>
            <p class="stat-value">{{ totalBudgets }}</p>
            <span class="stat-change positive">+3.1%</span>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h3>Quick Actions</h3>
        <div class="action-buttons">
          <button class="action-btn primary" (click)="setActiveSection('users')">
            <i class="fas fa-user-plus"></i>
            Manage Users
          </button>
          <button class="action-btn secondary" (click)="generateSystemReport()">
            <i class="fas fa-file-alt"></i>
            System Report
          </button>
          <button class="action-btn secondary" (click)="setActiveSection('categories')">
            <i class="fas fa-plus-circle"></i>
            Add Category
          </button>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="recent-activity">
        <div class="section-header">
          <h3>Recent Activity</h3>
          <button class="view-all-btn" (click)="setActiveSection('transactions')">View All</button>
        </div>
        <div class="activity-list">
          <div class="activity-item" *ngFor="let transaction of allTransactions.slice(0, 5)">
            <div class="activity-icon">
              <i class="fas fa-exchange-alt"></i>
            </div>
            <div class="activity-details">
              <h4>{{ transaction.description }}</h4>
              <p>{{ transaction.user }} • {{ transaction.category }} • {{ transaction.date | date:'short' }}</p>
            </div>
            <div class="activity-amount" [class]="transaction.type">
              <span [class]="transaction.type === 'income' ? 'positive' : 'negative'">
                {{ transaction.type === 'income' ? '+' : '-' }}₹{{ transaction.amount | number:'1.2-2' }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Users Section -->
    <div class="users-section" *ngIf="activeSection === 'users'">
      <div class="section-header">
        <h2>User Management</h2>
        <button class="add-user-btn">
          <i class="fas fa-user-plus"></i> Add New User
        </button>
      </div>

      <div class="users-table">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Status</th>
              <th>Join Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>
                <span class="status-badge" [class]="user.status">
                  {{ user.status | titlecase }}
                </span>
              </td>
              <td>{{ user.joinDate | date:'short' }}</td>
              <td>
                <button class="action-btn-small view" (click)="viewUserDetails(user)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="action-btn-small edit" (click)="editUser(user)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="action-btn-small delete" (click)="deleteUser(user)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Transactions Section -->
    <div class="transactions-section" *ngIf="activeSection === 'transactions'">
      <div class="section-header">
        <h2>All Transactions</h2>
        <button class="add-transaction-btn">
          <i class="fas fa-plus"></i> Add Transaction
        </button>
      </div>

      <div class="transactions-table">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>User</th>
              <th>Description</th>
              <th>Category</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of allTransactions">
              <td>{{ transaction.id }}</td>
              <td>{{ transaction.user }}</td>
              <td>{{ transaction.description }}</td>
              <td>{{ transaction.category }}</td>
              <td>
                <span class="type-badge" [class]="transaction.type">
                  {{ transaction.type | titlecase }}
                </span>
              </td>
              <td class="amount-cell" [class]="transaction.type">
                ₹{{ transaction.amount | number:'1.2-2' }}
              </td>
              <td>{{ transaction.date | date:'short' }}</td>
              <td>
                <button class="action-btn-small view" (click)="viewTransactionDetails(transaction)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="action-btn-small edit" (click)="editTransaction(transaction)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="action-btn-small delete" (click)="deleteTransaction(transaction)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Categories Section -->
    <div class="categories-section" *ngIf="activeSection === 'categories'">
      <div class="section-header">
        <h2>Category Management</h2>
        <button class="add-category-btn" (click)="addCategory()">
          <i class="fas fa-plus"></i> Add Category
        </button>
      </div>

      <div class="categories-grid">
        <div class="category-card" *ngFor="let category of categories">
          <div class="category-header">
            <h3>{{ category.name }}</h3>
            <div class="category-actions">
              <button class="action-btn-small edit" (click)="editCategory(category)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="action-btn-small delete" (click)="deleteCategory(category)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <p>{{ category.description }}</p>
          <div class="category-stats">
            <span>Users: {{ category.userCount }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Budgets Section -->
    <div class="budgets-section" *ngIf="activeSection === 'budgets'">
      <div class="section-header">
        <h2>Budget Management</h2>
      </div>

      <div class="budgets-table">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>User</th>
              <th>Category</th>
              <th>Limit</th>
              <th>Spent</th>
              <th>Remaining</th>
              <th>Period</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let budget of budgets">
              <td>{{ budget.id }}</td>
              <td>{{ budget.user }}</td>
              <td>{{ budget.category }}</td>
              <td>₹{{ budget.limit | number:'1.2-2' }}</td>
              <td>₹{{ budget.spent | number:'1.2-2' }}</td>
              <td class="remaining-cell" [class]="budget.spent > budget.limit ? 'over' : 'under'">
                ₹{{ (budget.limit - budget.spent) | number:'1.2-2' }}
              </td>
              <td>{{ budget.period }}</td>
              <td>
                <button class="action-btn-small view" (click)="viewBudgetDetails(budget)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="action-btn-small edit" (click)="editBudget(budget)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="action-btn-small delete" (click)="deleteBudget(budget)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Reports Section -->
    <div class="reports-section" *ngIf="activeSection === 'reports'">
      <div class="section-header">
        <h2>System Reports</h2>
      </div>

      <div class="reports-grid">
        <div class="report-card">
          <div class="report-icon">
            <i class="fas fa-users"></i>
          </div>
          <h3>User Analytics</h3>
          <p>Detailed user registration and activity reports</p>
          <button class="report-btn" (click)="generateUserReport()">
            Generate Report
          </button>
        </div>

        <div class="report-card">
          <div class="report-icon">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <h3>Transaction Reports</h3>
          <p>Comprehensive transaction analysis and trends</p>
          <button class="report-btn" (click)="generateTransactionReport()">
            Generate Report
          </button>
        </div>

        <div class="report-card">
          <div class="report-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h3>System Performance</h3>
          <p>Server performance and usage statistics</p>
          <button class="report-btn" (click)="generateSystemReport()">
            Generate Report
          </button>
        </div>

        <div class="report-card">
          <div class="report-icon">
            <i class="fas fa-database"></i>
          </div>
          <h3>Data Export</h3>
          <p>Export system data for backup or analysis</p>
          <button class="report-btn">
            Export Data
          </button>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div class="settings-section" *ngIf="activeSection === 'settings'">
      <div class="section-header">
        <h2>System Settings</h2>
      </div>

      <div class="settings-grid">
        <div class="setting-card">
          <h3>General Settings</h3>
          <div class="setting-item">
            <label>System Name</label>
            <input type="text" value="Smart Accounting" readonly>
          </div>
          <div class="setting-item">
            <label>Default Currency</label>
            <select>
              <option value="INR" selected>INR (₹)</option>
              <option value="USD">USD ($)</option>
              <option value="EUR">EUR (€)</option>
            </select>
          </div>
          <button class="save-btn">Save Changes</button>
        </div>

        <div class="setting-card">
          <h3>Security Settings</h3>
          <div class="setting-item">
            <label>Session Timeout (minutes)</label>
            <input type="number" value="30">
          </div>
          <div class="setting-item">
            <label>Password Policy</label>
            <select>
              <option value="strong" selected>Strong</option>
              <option value="medium">Medium</option>
              <option value="weak">Weak</option>
            </select>
          </div>
          <button class="save-btn">Update Security</button>
        </div>

        <div class="setting-card">
          <h3>Maintenance</h3>
          <button class="maintenance-btn">
            <i class="fas fa-database"></i> Backup Database
          </button>
          <button class="maintenance-btn">
            <i class="fas fa-broom"></i> Clear Cache
          </button>
          <button class="maintenance-btn">
            <i class="fas fa-server"></i> System Health Check
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
